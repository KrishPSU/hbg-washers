<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laundry Booking</title>

    <link rel="icon" href="../images/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="../images/favicon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="HBG Washers">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <link rel="manifest" href="/manifest.json">

    <script src="/socket.io/socket.io.js"></script>
    <script defer src="../js/load.js"></script>
    <script defer src="../js/main.js"></script>
    <script defer src="../js/alert.js"></script>
    <script defer src="../js/feedback.js"></script>
    <script defer src="../js/notification.js"></script>


    <link rel="stylesheet" href="../css/feedback.css">
    <link rel="stylesheet" href="../css/alert.css">
    <link rel="stylesheet" href="../css/dialog.css">
    <link rel="stylesheet" href="../css/main.css">

</head>
<body>
    <div class="alert hide">
        <span class="closebtn">&times;</span>
        <strong id="alert-title">Washer 1 Booked!</strong>
        <p id=alert-info>Please check your email to make sure you will be notified.</p>
    </div>

    <!-- Feedback Button -->
    <button id="feedback-btn">ğŸ“ Feedback</button>

    <!-- Modal Structure -->
    <div id="overlay" class="overlay hidden">
        <div class="modal-box">
            <span id="close-feedback-btn">&times;</span>
            <h2>Weâ€™d love your feedback!</h2>
            <p>What can we improve or what worked well?</p>
            <textarea id="feedbackInput" placeholder="Leave anonymous feedback here..." rows="5" required></textarea>
            <div class="modal-actions">
                <button id="submit-feedback-btn" class="submit-btn">Submit</button>
                <button id="cancel-feedback-btn">Cancel</button>
            </div>
            <p id="feedbackMessage" class="feedback-msg"></p>
        </div>
    </div>

    <div class="container">
        <h2>Book a Machine</h2>
        <div class="machine">
            <p>ğŸš¿ Washer 1</p>
            <button class="book-btn" data-machine-id="w1" data-machine-status=""></button>
        </div>
        <div class="machine">
            <p>ğŸš¿ Washer 2</p>
            <button class="book-btn" data-machine-id="w2" data-machine-status=""></button>
        </div>
        <div class="machine">
            <p>ğŸ§º Dryer 1</p>
            <button class="book-btn" data-machine-id="d1" data-machine-status=""></button>
        </div>
        <div class="machine">
            <p>ğŸ§º Dryer 2</p>
            <button class="book-btn" data-machine-id="d2" data-machine-status=""></button>
        </div>
        <dialog>
            <div class="modal_wrapper">
                <h2 data-machine-id="" id="machine-id"></h2>
                <label>
                    How long do you want to reserve this machine?
                    <select id="time-selected">
                    <option value="none">Chooseâ€¦</option>
                    <option>30 mins</option>
                    <option>1 hour</option>
                    <option>1 hour 30 mins</option>
                    </select>
                </label>
                <input type="email" name="email" id="email" placeholder="Personal email">
                <div id="modal-buttons">
                    <button id="submit-modal" disabled>Book</button>
                    <button id="close-modal" autofocus>Close</button>
                </div>
            </div>
        </dialog>
    </div>
    <section id="how-to-use" style="padding: 40px 20px; background-color: #f5f5f5; border-top: 1px solid #ddd;">
        <div style="max-width: 800px; margin: auto; text-align: center;">
          <h2 style="font-size: 28px; margin-bottom: 20px; color: #333;">ğŸ§¼ How to Use the Washers</h2>
      
          <ol style="text-align: left; font-size: 16px; color: #444; line-height: 1.6;">
            <li><strong>Check machine availability</strong> on the main page and book a washer.</li>
            <li><strong>Bring your laundry</strong> to the washer you booked.</li>
            <li><strong>Load your clothes</strong> and add detergent (donâ€™t overload it!).</li>
            <li><strong>Press START</strong> on the washer within 5 minutes of booking.</li>
            <li><strong>Come back when it's done</strong> â€” you'll get an email when the cycle finishes.</li>
            <li><strong>Unload promptly</strong> so others can use the machine â€” be kind, be fast! ğŸ˜Š</li>
          </ol>
      
          <p style="margin-top: 20px; font-size: 14px; color: #777;">
            Questions? Text us at <strong>(908) 777-0350</strong>.
          </p>
        </div>
      </section>

    <!-- Add to Home Screen Prompt (optimized for hbgwashers.com style) -->
<div id="install-prompt" style="
display: none;
position: fixed;
bottom: 20px;
left: 16px;
right: 16px;
background-color: #e6f0fa;
color: #333;
border-radius: 12px;
box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
padding: 16px;
z-index: 9999;
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.4;
opacity: 0;
transition: opacity 0.5s ease;
">
<strong>Get notified when washers are ready!</strong>
<p style="margin-top: 8px; margin-bottom: 8px;">
  To enable notifications, please add this site to your Home Screen:
</p>
<ul style="margin: 8px 0; padding-left: 20px;">
  <li>Tap the <strong>Share</strong> button at the bottom of Safari</li>
  <li>Select <strong>Add to Home Screen</strong></li>
  <li>Open the app from your Home Screen</li>
</ul>
<button onclick="dismissPrompt()" style="
  background-color: #0077cc;
  color: white;
  border: none;
  padding: 6px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  margin-top: 8px;
">Got it</button>
</div>

<script>
// Helper functions
function isIos() {
return /iphone|ipad|ipod/i.test(window.navigator.userAgent);
}

function isSafari() {
return /^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);
}

function isInStandaloneMode() {
return ('standalone' in window.navigator) && window.navigator.standalone;
}

// Show prompt only if on iOS Safari and NOT installed
// if (isIos() && isSafari() && !isInStandaloneMode()) {
if (true) {
const prompt = document.getElementById('install-prompt');
prompt.style.display = 'block';
setTimeout(() => {
  prompt.style.opacity = '1';
}, 50);
}

// Dismiss prompt function
function dismissPrompt() {
const prompt = document.getElementById('install-prompt');
prompt.style.opacity = '0';
setTimeout(() => {
  prompt.style.display = 'none';
}, 500);
}
</script>

    
</body>
</html>
